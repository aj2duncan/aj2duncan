---
title: "Betweenness and Degree Investigation"
author: ''
date: '2018-04-28'
slug: betweenness-degree-investigation
categories:
  - R
  - Networks
tags:
  - sigmaNet
  - Networks
description: ''
highlight: true
draft: true
---



<pre class="r"><code>knitr::opts_chunk$set(eval = TRUE, echo = FALSE, comment = NA, 
                      warning = FALSE, message = FALSE)

# loading packages
library(igraph)</code></pre>
<pre><code>## Warning: package &#39;igraph&#39; was built under R version 3.4.4</code></pre>
<pre><code>## 
## Attaching package: &#39;igraph&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     decompose, spectrum</code></pre>
<pre><code>## The following object is masked from &#39;package:base&#39;:
## 
##     union</code></pre>
<pre class="r"><code>library(ggraph)</code></pre>
<pre><code>## Loading required package: ggplot2</code></pre>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## -- Attaching packages ----------------------------------- tidyverse 1.2.1 --</code></pre>
<pre><code>## v tibble  1.4.2     v purrr   0.2.4
## v tidyr   0.8.0     v dplyr   0.7.4
## v readr   1.1.1     v stringr 1.3.0
## v tibble  1.4.2     v forcats 0.3.0</code></pre>
<pre><code>## -- Conflicts -------------------------------------- tidyverse_conflicts() --
## x dplyr::as_data_frame() masks tibble::as_data_frame(), igraph::as_data_frame()
## x purrr::compose()       masks igraph::compose()
## x tidyr::crossing()      masks igraph::crossing()
## x dplyr::filter()        masks stats::filter()
## x dplyr::groups()        masks igraph::groups()
## x dplyr::lag()           masks stats::lag()
## x purrr::simplify()      masks igraph::simplify()</code></pre>
<pre class="r"><code>library(knitr)
library(kableExtra)</code></pre>
<pre><code>## Warning: package &#39;kableExtra&#39; was built under R version 3.4.4</code></pre>
<pre class="r"><code>plot_graph = function(graph) {
  ggraph(graph, layout = &quot;kk&quot;) + 
    geom_edge_fan(arrow = arrow(type = &quot;closed&quot;, ends = &quot;last&quot;,
                                 length = unit(0.20, &quot;inches&quot;),
                                 angle = 15)) + 
    geom_node_point(aes(colour = name) , size = 3) +
    geom_node_text(aes(label = name), position = position_jitter(width = 0.15, 
                                                                 height = 0.15)) +
    scale_colour_discrete(name = &quot;Nodes&quot;) +
    theme_graph()
}</code></pre>
<div id="introduction" class="section level3">
<h3>Introduction</h3>
<p>To investigate the relationship of betweenness to total degree as we increase the number of edges I thought a basic graph might be of some use.</p>
<p><img src="/blog/2018-04-29-betweenness_investigation_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>Betweenness of a node <span class="math inline">\(k\)</span> is defined as <span class="math display">\[\sum_{i,j} \frac{s^k_{ij}}{n_{ij}}, \:\:i \ne j \ne k.\]</span> Where <span class="math inline">\(i\)</span>, <span class="math inline">\(j\)</span> represent the other nodes in the network, <span class="math inline">\(s^k_{ij}\)</span> is the number of shortest paths from <span class="math inline">\(i\)</span> to <span class="math inline">\(j\)</span> that go through <span class="math inline">\(k\)</span> and <span class="math inline">\(n_{ij}\)</span> is the total number of shortest paths from <span class="math inline">\(i\)</span> to <span class="math inline">\(j\)</span>.</p>
<p>For our graph we have:</p>
<pre><code>A B C D E F G 
0 0 4 4 0 0 0 </code></pre>
<pre><code>[1] 1.142857</code></pre>
<pre><code>A B C D E F G 
2 2 3 3 1 1 0 </code></pre>
<pre><code>[1] 12</code></pre>
<pre><code>[1] 1.714286</code></pre>
</div>
<div id="adding-edges" class="section level3">
<h3>Adding Edges</h3>
<p>Let us start by adding an edge that is a repeat of one that is already there. A to B.</p>
<p><img src="/blog/2018-04-29-betweenness_investigation_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre><code>A B C D E F G 
0 0 4 4 0 0 0 </code></pre>
<pre><code>[1] 1.142857</code></pre>
<pre><code>A B C D E F G 
3 3 3 3 1 1 0 </code></pre>
<pre><code>[1] 14</code></pre>
<pre><code>[1] 2</code></pre>
<p>We get a similar result if we add an additional edge from A to C, which is again a repeated edge.</p>
<p><img src="/blog/2018-04-29-betweenness_investigation_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre><code>A B C D E F G 
0 0 4 4 0 0 0 </code></pre>
<pre><code>[1] 1.142857</code></pre>
<pre><code>A B C D E F G 
4 3 4 3 1 1 0 </code></pre>
<pre><code>[1] 16</code></pre>
<pre><code>[1] 2.285714</code></pre>
<p>For clarity let’s remove these for a moment and add a new edge from B to D, bypassing C.</p>
<p><img src="/blog/2018-04-29-betweenness_investigation_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<pre><code>A B C D E F G 
0 1 1 4 0 0 0 </code></pre>
<pre><code>[1] 0.8571429</code></pre>
<pre><code>A B C D E F G 
2 3 3 4 1 1 0 </code></pre>
<pre><code>[1] 14</code></pre>
<pre><code>[1] 2</code></pre>
<p>Now we get a change as the shortest path from B to D no longer goes through C and we have two equally good choices for shortest paths from A to D.</p>
<p>If we put the repeated edges back in, the result is the same as previously, no change in the average betweenness but the average degree goes up.</p>
<p><img src="/blog/2018-04-29-betweenness_investigation_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<pre><code>A B C D E F G 
0 1 1 4 0 0 0 </code></pre>
<pre><code>[1] 0.8571429</code></pre>
<pre><code>A B C D E F G 
4 4 4 4 1 1 0 </code></pre>
<pre><code>[1] 18</code></pre>
<pre><code>[1] 2.571429</code></pre>
<p>If we complete the triangle with D, E and F we will introduce a new shortest path from E to F (that doesn’t need to go through D) and the average betweenness should drop.</p>
<p><img src="/blog/2018-04-29-betweenness_investigation_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<pre><code>A B C D E F G 
0 1 1 3 0 0 0 </code></pre>
<pre><code>[1] 0.7142857</code></pre>
<pre><code>A B C D E F G 
4 4 4 4 2 2 0 </code></pre>
<pre><code>[1] 20</code></pre>
<pre><code>[1] 2.857143</code></pre>
<p>Finally, we can connect node G to the original network. We can do this to create more shortest paths if make the edge from G into the network</p>
<p><img src="/blog/2018-04-29-betweenness_investigation_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<pre><code>A B C D E F G 
0 0 4 5 2 0 0 </code></pre>
<pre><code>[1] 1.571429</code></pre>
<pre><code>A B C D E F G 
2 2 3 3 2 1 1 </code></pre>
<pre><code>[1] 14</code></pre>
<pre><code>[1] 2</code></pre>
</div>
<div id="summary" class="section level3">
<h3>Summary</h3>
<p>Increasing the number of edges within a network does not necessarily change the value of the betweenness. As the examples above demonstrate, if we add a repetition of an existing edge the average betweenness doesn’t change but the average degree increases. However, if we add a new edge that provides a new shortest path, then the average betweenness will change.</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
network
</th>
<th style="text-align:right;">
av_bt
</th>
<th style="text-align:right;">
av_deg
</th>
<th style="text-align:right;">
tot_deg
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
g1
</td>
<td style="text-align:right;">
1.143
</td>
<td style="text-align:right;">
1.714
</td>
<td style="text-align:right;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
g2
</td>
<td style="text-align:right;">
1.143
</td>
<td style="text-align:right;">
2.000
</td>
<td style="text-align:right;">
14
</td>
</tr>
<tr>
<td style="text-align:left;">
g3
</td>
<td style="text-align:right;">
1.143
</td>
<td style="text-align:right;">
2.286
</td>
<td style="text-align:right;">
16
</td>
</tr>
<tr>
<td style="text-align:left;">
g4
</td>
<td style="text-align:right;">
0.857
</td>
<td style="text-align:right;">
2.000
</td>
<td style="text-align:right;">
14
</td>
</tr>
<tr>
<td style="text-align:left;">
g5
</td>
<td style="text-align:right;">
0.857
</td>
<td style="text-align:right;">
2.571
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
g6
</td>
<td style="text-align:right;">
0.714
</td>
<td style="text-align:right;">
2.857
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:left;">
g7
</td>
<td style="text-align:right;">
1.571
</td>
<td style="text-align:right;">
2.000
</td>
<td style="text-align:right;">
14
</td>
</tr>
</tbody>
</table>
</div>
