<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="map[]" />
    <meta name="description" content="My personal webpage built through Hugo and blogdown.">
    <link rel="shortcut icon" type="image/x-icon" href="../../img/favicon.ico">
    <title>Moving Axis Labels in ggplot2</title>
    <meta name="generator" content="Hugo 0.92.1" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link href='https://fonts.googleapis.com/css?family=Indie+Flower|Alegreya|Alegreya+Sans' rel='stylesheet'>
    <link rel="stylesheet" type="text/css" href="../../css/main.css" /><link href="//cdn.bootcss.com/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
    
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" />
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,400,200bold,400old" />
    
    <link rel="stylesheet" href="../../css/custom.css">
    
    <link rel="stylesheet" href="../../css/custom_leaflet.css">
    
    <!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
			<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->

    
  </head>

  <body>
    <div id="wrap">

      
      <nav class="navbar navbar-default">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="../../"><i class="fa fa-home"></i></a>
    </div>
    <div id="navbar">
      <ul class="nav navbar-nav navbar-right">
      
        
        <li><a href="../../blog/">BLOG</a></li>
        
        <li><a href="../../research/">RESEARCH</a></li>
        
      
      </ul>
    </div>
  </div>
</nav>

      
      <div class="container">
        <div class="blog-post">
          <h3>
            <strong><a href="../../blog/moving-axis-labels-in-ggplot2/">Moving Axis Labels in ggplot2</a></strong>
          </h3>
        </div>
        <div class="blog-title">
          <h4>
          January 30, 2022
            &nbsp;&nbsp;
            
            <span class="label label-tag">ggplot2</span>
            
            <span class="label label-tag">lubridate</span>
            
          </h4>
        </div>
        <div class="panel panel-default">
          <div class="panel-body">
            <div class="blogpost">
              


<p>A wee while ago I needed to tweak some plots. The plots are exported as jpegs and are always results over the last ten years. The change I needed to make was to move the default labels produced by <em>ggplot2</em>.</p>
<p>To demonstrate, let’s look at an example by reducing the <code>economics</code> dataset to 10 years of data and producing a quick plot.</p>
<pre class="r"><code>library(tidyverse)
library(lubridate)

# reduce the data
data_to_plot &lt;- filter(economics, 
                       between(date, as.Date(&quot;1970-01-01&quot;), 
                               as.Date(&quot;1980-01-01&quot;)))

ggplot(data_to_plot, aes(x = date, y = pop)) + 
  geom_line() </code></pre>
<p><img src="../../blog/moving-axis-labels-in-ggplot2/index_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>We can neaten this up a little by using the <em>lubridate</em> package and adding tickmarks for every year.</p>
<pre class="r"><code>library(lubridate)

data_to_plot &lt;- filter(economics, 
                       between(date, make_date(1970), 
                               make_date(1980)))

ggplot(data_to_plot, aes(x = date, y = pop)) + 
  geom_line() +
  scale_x_date(date_breaks = &quot;1 year&quot;, date_labels = &quot;%Y&quot;)</code></pre>
<p><img src="../../blog/moving-axis-labels-in-ggplot2/index_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>This is where we can start from. The next step is to make the change I need to in the plots. By default <em>ggplot2</em> puts a tickmark at the start of the year and this could be misinterpreted, due to the single tickmark, as the middle of the year. With this particular graph it might be unlikely as the data starts directly on the first tickmark but a small change could make this possible misinterpretation more likely.</p>
<pre class="r"><code>data_to_plot &lt;- filter(economics, 
                       between(date, make_date(1969, 9), 
                               make_date(1980)))

ggplot(data_to_plot, aes(x = date, y = pop)) + 
  geom_line() +
  scale_x_date(date_breaks = &quot;1 year&quot;, date_labels = &quot;%Y&quot;)</code></pre>
<p><img src="../../blog/moving-axis-labels-in-ggplot2/index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>The change I made was to move the labels of the tickmarks so that they sit between the tickmarks themselves - essentially putting them in line with the minor tickmarks, rather than the major tickmarks. There are packages that allow the minor tickmarks to be labelled but I wanted to avoid using additional packages.</p>
<p>One advantage that I had was that the plots produced are always a specific size and so I could use a <em>ggplot2</em> command to accomplish what I was looking for. A quick example would be</p>
<pre class="r"><code>data_to_plot &lt;- filter(economics, 
                       between(date, make_date(1970), 
                               make_date(1980)))

ggplot(data_to_plot,
       aes(x = date, y = pop)) +
  geom_line() +
  scale_x_date(date_breaks = &quot;1 year&quot;, date_labels = &quot;%Y&quot;) + 
  theme(axis.text.x = element_text(hjust = -0.55))</code></pre>
<p><img src="../../blog/moving-axis-labels-in-ggplot2/index_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>The final step is to tweak the number of labels by removing the final one. This also means that we can’t use the automatic labelling and it is easiest to add our own.</p>
<pre class="r"><code>data_to_plot &lt;- filter(economics, 
                       between(date, make_date(1970), 
                               make_date(1980)))

years_used &lt;- unique(year(data_to_plot$date))
year_labels &lt;- c(years_used[-length(years_used)], &quot;&quot;)

ggplot(data_to_plot,
       aes(x = date, y = pop)) +
  geom_line() +
  scale_x_date(breaks = make_date(years_used), labels = year_labels) +
  theme(axis.text.x = element_text(hjust = -0.55))</code></pre>
<p><img src="../../blog/moving-axis-labels-in-ggplot2/index_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>I was interested that this could be achieved really quite easily, without resorting to additional packages. However, I don’t think that this is the best method if the size of the plots was going to change or be dependent on user choice. I found that I needed to tweak the value given to <code>hjust =</code> to get it to look right. In my case this isn’t an issue because the images are exported to separate files.</p>

            
            </div>
          </div>
          <hr>
       
        </div>
      </div>
      
    </div>

    
    <footer>
  <div id="footer">
    <div class="container">
      <p class="text-muted">&copy; All rights reserved. Powered by <a href="https://github.com/rstudio/blogdown" target = "_blank">Blogdown</a>, <a href="https://gohugo.io/" target = "_blank">Hugo</a> and
      <a href="http://www.github.com/nurlansu/hugo-sustain/" target = "_blank">sustain</a> with ♥</p>
    </div>
  </div>
</footer>
<div class="footer"></div>
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    });
    </script>
    <script type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="../../js/docs.min.js"></script>
<script src="../../js/main.js"></script>

<script src="../../js/ie10-viewport-bug-workaround.js"></script><!-- Syntax highlighting -->
<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.12.0/languages/r.min.js"></script>
<script>
hljs.configure({languages: []});
hljs.initHighlightingOnLoad();
</script>



    
  </body>
</html>
